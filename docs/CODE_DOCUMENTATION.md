# MDP Platform ä»£ç è¯¦ç»†ä¿¡æ¯æ–‡æ¡£

## 1. é¡¹ç›®ç®€ä»‹

### 1.1 é¡¹ç›®å®šä½
**MDP Platformï¼ˆå¤šæ¨¡æ€æœ¬ä½“æ„å»ºå¹³å°ï¼‰** æ˜¯ CEC-AIOS çš„æ ¸å¿ƒæ¨¡å—ï¼Œé‡‡ç”¨"**å…¨å±€èµ„äº§ä¸€è‡´æ€§ (Global Consistency) + åœºæ™¯åŒ–æ•æ·åº”ç”¨ (Scenario Agility)**"çš„åŒå±‚è®¾è®¡åŸåˆ™ã€‚

### 1.2 æ ¸å¿ƒç‰¹æ€§
| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **æ–°æ¶æ„è®¾è®¡** | å¯¹æ ‡ Palantir Foundryï¼Œä½¿ç”¨ç‰©ç†è¡¨å­˜å‚¨æ•°æ® |
| **åŒå±‚æ¶æ„** | åº•å±‚ç‰©ç†è¡¨ + å…¼å®¹è§†å›¾å±‚ï¼Œæ”¯æŒæ¸è¿›å¼è¿ç§» |
| **ä»£ç æ‰§è¡Œå¼•æ“** | æ”¯æŒå†…ç½®ï¼ˆbuiltinï¼‰å’Œå­è¿›ç¨‹ï¼ˆsubprocessï¼‰ä¸¤ç§æ‰§è¡Œæ¨¡å¼ |
| **è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ API** | ä¸ºç”¨æˆ·ä»£ç æä¾›å®‰å…¨çš„æ•°æ®æ“ä½œæ¥å£ |
| **å®Œæ•´æµ‹è¯•è¦†ç›–** | 207 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆå•å…ƒ/é›†æˆ/è¾¹ç•Œ/å¹¶å‘ï¼‰ |
| **æ‰§è¡Œæ—¥å¿—ç³»ç»Ÿ** | å®Œæ•´çš„åŠ¨ä½œæ‰§è¡Œæ—¥å¿—è®°å½•å’ŒæŸ¥è¯¢ |

### 1.3 æŠ€æœ¯æ ˆ
| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| **åç«¯æ¡†æ¶** | FastAPI + SQLModel + MySQL |
| **å‰ç«¯æ¡†æ¶** | React 18 + TypeScript + Vite |
| **UI ç»„ä»¶åº“** | Ant Design 5.x |
| **å¯è§†åŒ–** | ReactFlowï¼ˆæ‹“æ‰‘å›¾ï¼‰+ React Leafletï¼ˆåœ°å›¾ï¼‰ |
| **æµ‹è¯•** | Pytestï¼ˆåç«¯ï¼‰+ Playwrightï¼ˆE2Eï¼‰ |
| **æ—¥å¿—** | Loguruï¼ˆåç«¯ï¼‰+ Axios æ‹¦æˆªå™¨ï¼ˆå‰ç«¯ï¼‰ |

---

## 2. ä»£ç æ ‘ç»“æ„

```
mdp/
â”œâ”€â”€ ğŸ“ backend/                      # Python/FastAPI åç«¯
â”‚   â”œâ”€â”€ ğŸ“ app/                      # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/v1/               # REST API ç«¯ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ ontology.py          # Meta å±‚ APIï¼ˆå¯¹è±¡ç±»å‹ã€é“¾æ¥ç­‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ execute.py           # è¿è¡Œæ—¶ APIï¼ˆæ‰§è¡Œã€æŸ¥è¯¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ core/                 # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†ï¼ˆPydantic Settingsï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ db.py                # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.py            # Loguru æ—¥å¿—é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ middleware.py        # è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ engine/               # ä¸šåŠ¡é€»è¾‘å¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ meta_crud.py         # Meta å±‚ CRUD
â”‚   â”‚   â”‚   â”œâ”€â”€ instance_crud.py     # Instance å±‚ CRUD
â”‚   â”‚   â”‚   â”œâ”€â”€ ontology_repository.py  # ç‰©ç†è¡¨æ˜ å°„å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ code_executor.py     # ä»£ç æ‰§è¡Œè°ƒåº¦å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ runtime_context.py   # è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ API
â”‚   â”‚   â”‚   â”œâ”€â”€ function_runner.py   # å‡½æ•°æ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ subprocess_runner.py # å­è¿›ç¨‹æ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â””â”€â”€ action_runner.py     # æ“ä½œæ‰§è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/               # SQLModel æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ meta.py              # Meta å±‚æ¨¡å‹ + DTO
â”‚   â”‚   â”‚   â””â”€â”€ data.py              # Instance å±‚æ¨¡å‹ + DTO
â”‚   â”‚   â””â”€â”€ main.py                  # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ ğŸ“ tests/                    # æµ‹è¯•å¥—ä»¶
â”‚   â”‚   â”œâ”€â”€ conftest.py              # Pytest fixtures
â”‚   â”‚   â”œâ”€â”€ test_object_types.py     # å¯¹è±¡ç±»å‹æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_link_types.py       # é“¾æ¥ç±»å‹æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_functions.py        # å‡½æ•°æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_actions.py          # åŠ¨ä½œæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_code_executor.py    # ä»£ç æ‰§è¡Œå™¨æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_runtime_context.py  # è¿è¡Œæ—¶ä¸Šä¸‹æ–‡æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_execution_logs.py   # æ‰§è¡Œæ—¥å¿—æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_edge_cases.py       # è¾¹ç•Œæ¡ä»¶æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_concurrency.py      # å¹¶å‘æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ scripts/                  # å·¥å…·è„šæœ¬
â”‚   â”‚   â””â”€â”€ cleanup_test_data.py     # æµ‹è¯•æ•°æ®æ¸…ç†
â”‚   â”œâ”€â”€ ğŸ“ docs/                     # æ–‡æ¡£
â”‚   â”‚   â””â”€â”€ database_schema_relationships.md  # æ•°æ®åº“æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ init.sql                     # æ•°æ®åº“æ¶æ„ SQL
â”‚   â”œâ”€â”€ seed_data.sql                # æ¼”ç¤ºæ•°æ®
â”‚   â”œâ”€â”€ setup_db.py                  # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ requirements.txt             # Python ä¾èµ–
â”‚   â””â”€â”€ pytest.ini                   # Pytest é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ frontend/                     # React/TypeScript å‰ç«¯
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/                  # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ axios.ts             # Axios é…ç½®ï¼ˆå¸¦æ—¥å¿—æ‹¦æˆªå™¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts            # åŸºç¡€å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ontology.ts          # æœ¬ä½“ API å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts             # ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ formatters.ts        # æ•°æ®æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ ğŸ“ layouts/              # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ MainLayout.tsx       # ä¸»å¸ƒå±€ï¼ˆä¾§è¾¹æ ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ platform/             # å¹³å°ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ OMA/              # æœ¬ä½“ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OntologyLibrary.tsx   # æœ¬ä½“åº“åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TypeBuilder.tsx       # ç±»å‹æ„å»ºå™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FunctionEditor.tsx    # å‡½æ•°ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ Studio/           # é¡¹ç›®å·¥ä½œå®¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudioLayout.tsx      # å·¥ä½œå®¤å¸ƒå±€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TopologyView.tsx      # æ‹“æ‰‘è§†å›¾ï¼ˆReactFlowï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ObjectTypeList.tsx    # å¯¹è±¡ç±»å‹åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ObjectTypeWizard.tsx  # åˆ›å»ºå‘å¯¼ï¼ˆ3æ­¥ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ObjectTypeEditor.tsx  # ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LinkTypeList.tsx      # é“¾æ¥ç±»å‹åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LinkTypeWizard.tsx    # åˆ›å»ºå‘å¯¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LinkTypeEditor.tsx    # ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SharedPropertyList.tsx    # å…¬å…±å±æ€§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PhysicalPropertyList.tsx  # ç‰©ç†å±æ€§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ActionDefinitionList.tsx  # è¡Œä¸ºå®šä¹‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FunctionList.tsx          # å‡½æ•°åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ExecutionLogList.tsx      # æ‰§è¡Œæ—¥å¿—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OntologyTest.tsx          # æµ‹è¯•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ Explorer/         # æ•°æ®æ¢ç´¢
â”‚   â”‚   â”‚       â””â”€â”€ ObjectTable.tsx       # å¯¹è±¡è¡¨æ ¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“ apps/                 # åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ Battlefield/      # æˆ˜åœºæ€åŠ¿åº”ç”¨
â”‚   â”‚   â”‚       â””â”€â”€ Dashboard.tsx         # åœ°å›¾ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ dagreLayout.ts       # Dagre å¸ƒå±€ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ App.tsx                  # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ main.tsx                 # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ e2e/                      # E2E æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ontology-test.spec.ts    # æœ¬ä½“æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ execution-log.spec.ts    # æ‰§è¡Œæ—¥å¿—æµ‹è¯•
â”‚   â”‚   â””â”€â”€ user-workflows.spec.ts   # ç”¨æˆ·å·¥ä½œæµæµ‹è¯•
â”‚   â”œâ”€â”€ playwright.config.ts         # Playwright é…ç½®
â”‚   â””â”€â”€ vite.config.ts               # Vite é…ç½®
â”‚
â”œâ”€â”€ docker-compose.yml               # Docker ç¼–æ’
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
â””â”€â”€ database_schema.sql              # å®Œæ•´æ•°æ®åº“æ¶æ„
```

---

## 3. ä»£ç åˆ†å±‚ä¿¡æ¯

### 3.1 åç«¯åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API å±‚ (api/v1/)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ontology.py    â”‚  â”‚         execute.py               â”‚  â”‚
â”‚  â”‚  - Meta CRUD    â”‚  â”‚  - Action æ‰§è¡Œ                   â”‚  â”‚
â”‚  â”‚  - åˆ†é¡µæŸ¥è¯¢     â”‚  â”‚  - ä»£ç æµ‹è¯•                      â”‚  â”‚
â”‚  â”‚  - è¾“å…¥éªŒè¯     â”‚  â”‚  - å¯¹è±¡æŸ¥è¯¢                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¼•æ“å±‚ (engine/)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ meta_crud.py â”‚  â”‚instance_crud â”‚  â”‚ code_executor.py â”‚  â”‚
â”‚  â”‚ - CRUD æ“ä½œ  â”‚  â”‚ - å¯¹è±¡å®ä¾‹   â”‚  â”‚ - æ‰§è¡Œè°ƒåº¦       â”‚  â”‚
â”‚  â”‚ - æ¶æ„æ£€æµ‹   â”‚  â”‚ - ç‰©ç†è¡¨å†™å…¥ â”‚  â”‚ - è¶…æ—¶æ§åˆ¶       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ontology_repository  â”‚  â”‚    runtime_context.py      â”‚  â”‚
â”‚  â”‚ - ç‰©ç†è¡¨æ˜ å°„         â”‚  â”‚    - ç”¨æˆ·ä»£ç  API          â”‚  â”‚
â”‚  â”‚ - SQL æ„å»º           â”‚  â”‚    - å®‰å…¨æ•°æ®è®¿é—®          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ¨¡å‹å±‚ (models/)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  meta.py - Meta å±‚æ¨¡å‹                              â”‚   â”‚
â”‚  â”‚  - Project, ObjectType, LinkType                    â”‚   â”‚
â”‚  â”‚  - FunctionDefinition, ActionDefinition             â”‚   â”‚
â”‚  â”‚  - SharedProperty + DTOs (Create/Update/Read)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  data.py - Instance å±‚æ¨¡å‹                          â”‚   â”‚
â”‚  â”‚  - ObjectInstance, LinkInstance                     â”‚   â”‚
â”‚  â”‚  - DataSourceTable, ExecutionLog + DTOs             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ ¸å¿ƒå±‚ (core/)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ config.py  â”‚  â”‚   db.py    â”‚  â”‚    middleware.py    â”‚   â”‚
â”‚  â”‚ - ç¯å¢ƒå˜é‡ â”‚  â”‚ - Session  â”‚  â”‚    - è¯·æ±‚æ—¥å¿—       â”‚   â”‚
â”‚  â”‚ - Pydantic â”‚  â”‚ - å¼•æ“     â”‚  â”‚    - Request ID     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å‰ç«¯åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è·¯ç”±å±‚ (App.tsx)                       â”‚
â”‚  /                    â†’ MainLayout                          â”‚
â”‚  /oma/library         â†’ OntologyLibrary                     â”‚
â”‚  /oma/project/:id/*   â†’ StudioLayout (åµŒå¥—è·¯ç”±)            â”‚
â”‚  /apps/battlefield    â†’ BattlefieldDashboard               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¸ƒå±€å±‚ (layouts/)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  MainLayout.tsx - ä¸»å¸ƒå±€                            â”‚   â”‚
â”‚  â”‚  - ä¾§è¾¹æ å¯¼èˆª                                       â”‚   â”‚
â”‚  â”‚  - é¢åŒ…å±‘                                           â”‚   â”‚
â”‚  â”‚  - Outlet å­è·¯ç”±æ¸²æŸ“                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  StudioLayout.tsx - å·¥ä½œå®¤å¸ƒå±€                      â”‚   â”‚
â”‚  â”‚  - é¡¹ç›®çº§ä¾§è¾¹æ                                      â”‚   â”‚
â”‚  â”‚  - åŠŸèƒ½æ¨¡å—å¯¼èˆª                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     é¡µé¢å±‚ (platform/)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  OMA/ æ¨¡å—    â”‚  â”‚        Studio/ æ¨¡å—              â”‚   â”‚
â”‚  â”‚  - Library    â”‚  â”‚  - TopologyView (ReactFlow)      â”‚   â”‚
â”‚  â”‚  - TypeBuilderâ”‚  â”‚  - ObjectType/LinkType ç®¡ç†      â”‚   â”‚
â”‚  â”‚               â”‚  â”‚  - Function/Action ç®¡ç†          â”‚   â”‚
â”‚  â”‚               â”‚  â”‚  - SharedProperty/Physical       â”‚   â”‚
â”‚  â”‚               â”‚  â”‚  - ExecutionLog æŸ¥çœ‹             â”‚   â”‚
â”‚  â”‚               â”‚  â”‚  - OntologyTest æµ‹è¯•             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     API å±‚ (api/)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ontology.ts - æœ¬ä½“ API                             â”‚   â”‚
â”‚  â”‚  - fetchProjects, fetchObjectTypes, fetchLinkTypes  â”‚   â”‚
â”‚  â”‚  - createObjectType, updateObjectType, deleteXXX    â”‚   â”‚
â”‚  â”‚  - fetchFunctions, fetchActions, executeAction      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  axios.ts - HTTP å®¢æˆ·ç«¯                             â”‚   â”‚
â”‚  â”‚  - è¯·æ±‚/å“åº”æ‹¦æˆªå™¨                                  â”‚   â”‚
â”‚  â”‚  - è‡ªåŠ¨æ—¥å¿—è®°å½•                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 æ•°æ®åº“åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å…¼å®¹è§†å›¾å±‚ (Compatibility)                â”‚
â”‚  meta_project (è§†å›¾)         â† è™šæ‹Ÿé¡¹ç›®                    â”‚
â”‚  meta_object_type (è§†å›¾)     â† ont_object_type             â”‚
â”‚  meta_link_type (è§†å›¾)       â† ont_link_type               â”‚
â”‚  sys_object_instance (è§†å›¾)  â† UNION ALL data_* è¡¨         â”‚
â”‚  sys_datasource_table (è§†å›¾) â† sys_dataset                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç‰©ç†æ•°æ®å±‚ (Physical Data)                â”‚
â”‚  data_fighter    - æˆ˜æ–—æœºæ•°æ®                              â”‚
â”‚  data_target     - ç›®æ ‡æ•°æ®                                â”‚
â”‚  data_mission    - ä»»åŠ¡æ•°æ®                                â”‚
â”‚  link_mission_participation - ä»»åŠ¡å‚ä¸å…³ç³»                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æœ¬ä½“å®šä¹‰å±‚ (Ontology Definition)          â”‚
â”‚  ont_object_type       - å¯¹è±¡ç±»å‹å®šä¹‰                      â”‚
â”‚  ont_object_property   - å±æ€§æ˜ å°„ï¼ˆé€»è¾‘â†’ç‰©ç†ï¼‰             â”‚
â”‚  ont_link_type         - é“¾æ¥ç±»å‹å®šä¹‰                      â”‚
â”‚  ont_link_rule         - é“¾æ¥è§„åˆ™                          â”‚
â”‚  ont_shared_property_type - å…±äº«å±æ€§ç±»å‹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®åº•åº§å±‚ (Data Foundation)              â”‚
â”‚  sys_dataset           - æ•°æ®é›†æ³¨å†Œè¡¨                      â”‚
â”‚  sys_dataset_column    - æ•°æ®é›†åˆ—å®šä¹‰                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   é€»è¾‘è¿è¡Œæ—¶å±‚ (Logic & Runtime)            â”‚
â”‚  meta_function_def     - å‡½æ•°å®šä¹‰                          â”‚
â”‚  meta_action_def       - åŠ¨ä½œå®šä¹‰                          â”‚
â”‚  sys_action_log        - æ‰§è¡Œæ—¥å¿—                          â”‚
â”‚  meta_shared_property  - å…±äº«å±æ€§ï¼ˆæ—§ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. æ¯ä¸ªä»£ç æ–‡ä»¶çš„ä½œç”¨

### 4.1 åç«¯æ ¸å¿ƒæ–‡ä»¶

#### ğŸ“ `app/core/` - æ ¸å¿ƒæ¨¡å—

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `config.py` | åº”ç”¨é…ç½®ç®¡ç†ï¼Œä½¿ç”¨ Pydantic Settings åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆDATABASE_URL, DEBUGï¼‰ |
| `db.py` | SQLModel å¼•æ“é…ç½®ï¼ŒSession ä¾èµ–æ³¨å…¥ï¼ˆ`get_session()` ç”Ÿæˆå™¨ï¼‰ |
| `logger.py` | Loguru æ—¥å¿—é…ç½®ï¼šæ§åˆ¶å°å½©è‰²è¾“å‡º + æ–‡ä»¶è½®è½¬ï¼ˆ10MBï¼Œä¿ç•™10å¤©ï¼‰ |
| `middleware.py` | HTTP ä¸­é—´ä»¶ï¼šç”Ÿæˆ Request IDã€è®°å½•è¯·æ±‚/å“åº”æ—¥å¿—ã€è®¡ç®—å¤„ç†æ—¶é—´ |

#### ğŸ“ `app/models/` - æ•°æ®æ¨¡å‹

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `meta.py` | **Meta å±‚æ¨¡å‹**ï¼šProjectã€ObjectTypeã€LinkTypeã€FunctionDefinitionã€ActionDefinitionã€SharedPropertyï¼›åŒ…å« Create/Update/Read DTOs |
| `data.py` | **Instance å±‚æ¨¡å‹**ï¼šObjectInstanceã€LinkInstanceã€DataSourceTableã€ExecutionLogï¼›åŒ…å« DTOs |

#### ğŸ“ `app/engine/` - ä¸šåŠ¡é€»è¾‘å¼•æ“

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `meta_crud.py` | Meta å±‚ CRUD æ“ä½œï¼š`create_*`, `get_*`, `list_*`, `update_*`, `delete_*`ï¼›æ”¯æŒæŒ‰ `api_name` æŸ¥æ‰¾ï¼›è‡ªåŠ¨æ£€æµ‹æ–°æ—§æ¶æ„ |
| `instance_crud.py` | Instance å±‚ CRUDï¼šå¯¹è±¡/é“¾æ¥å®ä¾‹çš„å¢åˆ æ”¹æŸ¥ï¼›**æ”¯æŒç‰©ç†è¡¨å†™å…¥**ï¼ˆé€šè¿‡ OntologyRepositoryï¼‰ |
| `ontology_repository.py` | **ç‰©ç†è¡¨æ˜ å°„å±‚**ï¼š`resolve_physical_table()` è§£æå¯¹è±¡ç±»å‹åˆ°è¡¨åï¼›`get_property_mappings()` è·å–å±æ€§æ˜ å°„ï¼›æ„å»º INSERT/UPDATE/DELETE SQL |
| `code_executor.py` | **ä»£ç æ‰§è¡Œè°ƒåº¦å™¨**ï¼šæ ¹æ®ä»£ç ç‰¹å¾è‡ªåŠ¨é€‰æ‹©æ‰§è¡Œå™¨ï¼ˆbuiltin/subprocessï¼‰ï¼›æ”¯æŒè¶…æ—¶æ§åˆ¶ï¼›æ£€æµ‹å±é™©å¯¼å…¥ |
| `runtime_context.py` | **è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ API**ï¼šä¸ºç”¨æˆ·ä»£ç æä¾› `get_object`, `update_object`, `create_object`, `query_objects`, `get_linked_objects` ç­‰å®‰å…¨æ¥å£ |
| `function_runner.py` | å‡½æ•°æ‰§è¡Œå™¨ï¼š`execute_code_direct()` å†…ç½®æ‰§è¡Œï¼›`test_code()` ä»£ç è¯•è¿è¡Œ |
| `subprocess_runner.py` | å­è¿›ç¨‹æ‰§è¡Œå™¨ï¼šéš”ç¦»ç¯å¢ƒæ‰§è¡Œä»£ç ï¼Œæ•è· stdout/stderrï¼Œæ”¯æŒè¶…æ—¶ |
| `action_runner.py` | æ“ä½œæ‰§è¡Œå™¨ç¤ºä¾‹ |

#### ğŸ“ `app/api/v1/` - REST API

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `ontology.py` | **Meta å±‚ API**ï¼ˆå‰ç¼€ `/api/v1/meta`ï¼‰ï¼šProjectsã€ObjectTypesã€LinkTypesã€SharedPropertiesã€DataSourceTablesã€Functionsã€Actions çš„ CRUD ç«¯ç‚¹ï¼›æ”¯æŒåˆ†é¡µå’Œæ›´æ–° |
| `execute.py` | **è¿è¡Œæ—¶ API**ï¼ˆå‰ç¼€ `/api/v1/execute`ï¼‰ï¼š`POST /action/run` æ‰§è¡ŒåŠ¨ä½œï¼›`POST /code/test` ä»£ç è¯•è¿è¡Œï¼›`GET /objects/{type}` å¯¹è±¡æŸ¥è¯¢ï¼›`GET /logs` æ‰§è¡Œæ—¥å¿—æŸ¥è¯¢ |

#### `app/main.py` - åº”ç”¨å…¥å£

FastAPI åº”ç”¨é…ç½®ï¼šCORS ä¸­é—´ä»¶ã€æ—¥å¿—ä¸­é—´ä»¶ã€é™æ€æ–‡ä»¶æŒ‚è½½ã€è·¯ç”±æ³¨å†Œã€å…¨å±€å¼‚å¸¸å¤„ç†

---

### 4.2 å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

#### ğŸ“ `src/api/` - API å®¢æˆ·ç«¯

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `axios.ts` | Axios å®ä¾‹é…ç½®ï¼Œå¸¦è¯·æ±‚/å“åº”æ—¥å¿—æ‹¦æˆªå™¨ |
| `client.ts` | åŸºç¡€ API å®¢æˆ·ç«¯é…ç½®ï¼ˆbaseURL ç­‰ï¼‰ |
| `ontology.ts` | æœ¬ä½“ API å‡½æ•°ï¼š`fetchProjects`, `fetchObjectTypes`, `createObjectType`, `executeAction` ç­‰ |
| `types.ts` | TypeScript ç±»å‹å®šä¹‰ |
| `formatters.ts` | æ•°æ®æ ¼å¼åŒ–å·¥å…·å‡½æ•° |

#### ğŸ“ `src/layouts/` - å¸ƒå±€ç»„ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `MainLayout.tsx` | ä¸»åº”ç”¨å¸ƒå±€ï¼šå·¦ä¾§å›ºå®šä¾§è¾¹æ ã€åŠ¨æ€èœå•ã€`<Outlet />` æ¸²æŸ“å­è·¯ç”± |

#### ğŸ“ `src/platform/OMA/` - æœ¬ä½“ç®¡ç†

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `OntologyLibrary.tsx` | æœ¬ä½“åº“åˆ—è¡¨é¡µï¼šæ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®ï¼Œæ”¯æŒè¿›å…¥é¡¹ç›®å·¥ä½œå®¤ |
| `TypeBuilder.tsx` | ç±»å‹æ„å»ºå™¨ç»„ä»¶ |
| `FunctionEditor.tsx` | å‡½æ•°ä»£ç ç¼–è¾‘å™¨ |

#### ğŸ“ `src/platform/Studio/` - é¡¹ç›®å·¥ä½œå®¤

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `StudioLayout.tsx` | å·¥ä½œå®¤å¸ƒå±€ï¼šé¡¹ç›®çº§ä¾§è¾¹æ å¯¼èˆªã€åµŒå¥—è·¯ç”± |
| `TopologyView.tsx` | **æ‹“æ‰‘è§†å›¾**ï¼šä½¿ç”¨ ReactFlow å¯è§†åŒ–å¯¹è±¡ç±»å‹å’Œé“¾æ¥å…³ç³» |
| `ObjectTypeList.tsx` | å¯¹è±¡ç±»å‹åˆ—è¡¨ï¼šè¡¨æ ¼å±•ç¤ºã€åˆ›å»º/ç¼–è¾‘/åˆ é™¤æ“ä½œ |
| `ObjectTypeWizard.tsx` | å¯¹è±¡ç±»å‹åˆ›å»ºå‘å¯¼ï¼š3æ­¥ï¼ˆåŸºæœ¬ä¿¡æ¯ â†’ æ•°æ®æºé€‰æ‹© â†’ å±æ€§æ˜ å°„ï¼‰ |
| `ObjectTypeEditor.tsx` | å¯¹è±¡ç±»å‹ç¼–è¾‘å™¨ï¼šæ ‡ç­¾é¡µå¸ƒå±€ |
| `LinkTypeList.tsx` | é“¾æ¥ç±»å‹åˆ—è¡¨ |
| `LinkTypeWizard.tsx` | é“¾æ¥ç±»å‹åˆ›å»ºå‘å¯¼ï¼šåŠ¨æ€æ­¥éª¤ï¼ˆ2-3æ­¥ï¼Œæ ¹æ®åŸºæ•°ï¼‰ |
| `LinkTypeEditor.tsx` | é“¾æ¥ç±»å‹ç¼–è¾‘å™¨ |
| `SharedPropertyList.tsx` | å…¬å…±å±æ€§åˆ—è¡¨ï¼ˆæ ‡å‡†å±æ€§åº“ SPTï¼‰ |
| `SharedPropertyModal.tsx` | å…¬å…±å±æ€§æ¨¡æ€æ¡†ï¼šåˆ›å»º/ç¼–è¾‘ |
| `PhysicalPropertyList.tsx` | ç‰©ç†å±æ€§èšåˆè§†å›¾ |
| `ActionDefinitionList.tsx` | è¡Œä¸ºå®šä¹‰åˆ—è¡¨ |
| `FunctionList.tsx` | å‡½æ•°åˆ—è¡¨ |
| `FunctionWizard.tsx` | å‡½æ•°åˆ›å»ºå‘å¯¼ |
| `ActionWizard.tsx` | åŠ¨ä½œåˆ›å»ºå‘å¯¼ |
| `ActionEditor.tsx` | åŠ¨ä½œç¼–è¾‘å™¨ |
| `ExecutionLogList.tsx` | æ‰§è¡Œæ—¥å¿—åˆ—è¡¨ï¼šæ”¯æŒçŠ¶æ€ç­›é€‰ã€åˆ†é¡µ |
| `OntologyTest.tsx` | **æœ¬ä½“æµ‹è¯•é¡µé¢**ï¼š3åˆ—å¸ƒå±€ï¼ˆåŠ¨ä½œåº“ã€ç¼–æ’ç”»å¸ƒã€ç›‘æ§é¢æ¿ï¼‰ |

#### ğŸ“ `src/platform/Explorer/` - æ•°æ®æ¢ç´¢

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `ObjectTable.tsx` | å¯¹è±¡å®ä¾‹è¡¨æ ¼ï¼šå±•ç¤ºç‰©ç†æ•°æ® |

#### ğŸ“ `src/apps/Battlefield/` - æˆ˜åœºæ€åŠ¿åº”ç”¨

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `Dashboard.tsx` | **æˆ˜åœºä»ªè¡¨æ¿**ï¼šReact Leaflet åœ°å›¾ã€å®æ—¶æ˜¾ç¤º Fighter/Target ä½ç½®ã€æ‰§è¡Œæ‰“å‡»æ“ä½œ |

#### ğŸ“ `src/utils/` - å·¥å…·å‡½æ•°

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `dagreLayout.ts` | Dagre è‡ªåŠ¨å¸ƒå±€ç®—æ³•ï¼Œç”¨äº ReactFlow èŠ‚ç‚¹æ’åˆ— |

#### `src/App.tsx` - è·¯ç”±é…ç½®

React Router é…ç½®ï¼šä¸»å¸ƒå±€è·¯ç”±ã€åµŒå¥—å·¥ä½œå®¤è·¯ç”±ã€åº”ç”¨è·¯ç”±

---

### 4.3 æµ‹è¯•æ–‡ä»¶

#### ğŸ“ `backend/tests/` - åç«¯æµ‹è¯•

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `conftest.py` | Pytest fixturesï¼šæµ‹è¯•æ•°æ®åº“ä¼šè¯ã€æµ‹è¯•å®¢æˆ·ç«¯ |
| `test_object_types.py` | å¯¹è±¡ç±»å‹ CRUD æµ‹è¯• |
| `test_link_types.py` | é“¾æ¥ç±»å‹ CRUD æµ‹è¯• |
| `test_functions.py` | å‡½æ•°å®šä¹‰æµ‹è¯• |
| `test_actions.py` | åŠ¨ä½œå®šä¹‰æµ‹è¯• |
| `test_code_executor.py` | ä»£ç æ‰§è¡Œå™¨æµ‹è¯•ï¼šå†…ç½®/å­è¿›ç¨‹æ‰§è¡Œã€è¶…æ—¶ã€é”™è¯¯å¤„ç† |
| `test_runtime_context.py` | è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ API æµ‹è¯• |
| `test_execution_logs.py` | æ‰§è¡Œæ—¥å¿— CRUD æµ‹è¯• |
| `test_edge_cases.py` | **è¾¹ç•Œæ¡ä»¶æµ‹è¯•**ï¼šç©ºå€¼ã€è¶…é•¿æ•°æ®ã€ç‰¹æ®Šå­—ç¬¦ã€é€’å½’ |
| `test_concurrency.py` | **å¹¶å‘æµ‹è¯•**ï¼šå¹¶å‘ä»£ç æ‰§è¡Œã€å¹¶å‘ API è¯·æ±‚ |

#### ğŸ“ `frontend/e2e/` - E2E æµ‹è¯•

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `ontology-test.spec.ts` | æœ¬ä½“æµ‹è¯•é¡µé¢ E2E |
| `execution-log.spec.ts` | æ‰§è¡Œæ—¥å¿—é¡µé¢ E2E |
| `user-workflows.spec.ts` | ç”¨æˆ·å·¥ä½œæµ E2E |
| `object-type-management.spec.ts` | å¯¹è±¡ç±»å‹ç®¡ç† E2E |
| `link-type-management.spec.ts` | é“¾æ¥ç±»å‹ç®¡ç† E2E |
| `project-management.spec.ts` | é¡¹ç›®ç®¡ç† E2E |
| `topology-view.spec.ts` | æ‹“æ‰‘è§†å›¾ E2E |

---

### 4.4 é…ç½®å’Œè„šæœ¬æ–‡ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `backend/init.sql` | æ•°æ®åº“æ¶æ„ SQLï¼ˆè¡¨ã€è§†å›¾ã€ç´¢å¼•ï¼‰ |
| `backend/seed_data.sql` | Battlefield æ¼”ç¤ºæ•°æ® |
| `backend/setup_db.py` | æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼šåˆ›å»ºæ•°æ®åº“ã€åº”ç”¨æ¶æ„ã€åŠ è½½æ•°æ® |
| `backend/requirements.txt` | Python ä¾èµ–åˆ—è¡¨ |
| `backend/pytest.ini` | Pytest é…ç½® |
| `backend/.env` | ç¯å¢ƒå˜é‡ï¼ˆDATABASE_URL, DEBUGï¼‰ |
| `frontend/vite.config.ts` | Vite æ„å»ºé…ç½® |
| `frontend/playwright.config.ts` | Playwright E2E æµ‹è¯•é…ç½® |
| `docker-compose.yml` | Docker ç¼–æ’ï¼šMySQL æœåŠ¡é…ç½® |

---

## 5. å¿«é€Ÿå¯åŠ¨

### 5.1 åç«¯å¯åŠ¨

```powershell
cd backend
.\.venv\Scripts\activate
py -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 5.2 å‰ç«¯å¯åŠ¨

```powershell
cd frontend
npm run dev -- --port 4000
```

### 5.3 è®¿é—®åœ°å€

- **å‰ç«¯**: http://localhost:4000
- **åç«¯ API**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs

---

*æ–‡æ¡£æ›´æ–°æ—¥æœŸ: 2026-01-22*
